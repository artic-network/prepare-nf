# prepare-nf
Generate a run sample sheet to input to [amplicon-nf](https://github.com/artic-network/amplicon-nf).

This workflow is primarily designed to be run via a GUI such as [EPI2ME](https://nanoporetech.com/products/analyse/epi2me) and a general guide can be found [here](https://artic.network/viruses/mev/prepare-nf-guide.html).

If you want to run on the command line

Required arguments are:
- `run_dir` - the directory where reads have been generated by the sequencer e.g. for ONT this will be a directory containing a subdirectory of fastq for each barcode
- `platform` - currently only supports "ont"/"nanopore"
- `metadata` - a CSV or XLS file containing barcode and sample columns, often called a "sample sheet"
- `amplicon_scheme` - either a primal-scheme name in the format `<name>/<length>/<version>` or a custom scheme name (in which case `--custom_scheme_path` must also provided)

Example command:
```
nextflow run artic-network/prepare-nf --platform ont --run_dir test --metadata test/samplesheet.csv --amplicon_scheme custom/3000/v1.0.0
```
This pipeline will then generate a `sample_config.csv` file which can be input directly to amplicon-nf. This CSV file populates all sample rows with the shared metadata about platform and amplicon scheme, and a fastq path for each barcode found in the run directory. It will exclude any sample/barcode rows where there is no sample name provided, or no where no fastq files were found for the specified barcode.
