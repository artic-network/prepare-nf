{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/artic-network/scylla/main/nextflow_schema.json",
  "title": "artic-network/prepare-nf",
  "description": "Create a sample sheet for amplicon-nf.",
  "url": "https://github.com/artic-network/scylla",
  "type": "object",
  "definitions": {
    "input_options": {
      "title": "Input Options",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Define where the pipeline should find input data and save output data.",
      "properties": {
        "platform": {
          "type": "string",
          "default": "ONT",
          "title": "Sequencing platform",
          "description": "Illumina or ONT.",
          "enum": [
            "ONT",
            "Illumina"
          ]
        },
        "run_dir": {
          "type": "string",
          "format": "path",
          "title": "Run Directory",
          "description": "A directory containing a directory of fastq for a each barcode in a run.",
          "help_text": "A directory containing subdirectories of fastq files for each barcode in the run."
        },
        "metadata": {
          "type": "string",
          "format": "path",
          "title": "Metadata",
          "description": "A CSV or XLS file containing columns for sample, barcode, and any additional sample information.",
          "help_text": "This can be generated from the excel templates."
        },
        "amplicon_scheme": {
          "type": "string",
          "title": "Amplicon scheme",
          "description": "Primer scheme identifier in format e.g. artic-inrb-mpox/2500/v1.0.0"
        }
      },
     "required": [
          "platform",
          "run_dir",
          "metadata",
          "amplicon_scheme"
        ]
    },
    "advanced_options": {
      "title": "Advanced Options",
      "type": "object",
      "description": "Advanced options for configuring processes inside the workflow.",
      "default": "",
      "properties": {
        "local": {
          "type": "boolean",
          "default": true,
          "title": "Use lower resources appropriate for local computer",
          "description": "Maximum number of CPU threads to use per workflow task.",
          "help_text": "This workflow will request HPC level resources unless this is checked."
        },
        "threads": {
          "type": "integer",
          "default": 2,
          "title": "Maximum number of CPU threads",
          "description": "Maximum number of CPU threads to use per workflow task.",
          "help_text": "Several tasks in this workflow benefit from using multiple CPU threads. This option sets the number of CPU threads for all such processes. The total CPU resource used by the workflow is constrained by the executor configuration. See server threads parameter for kraken specific threads."
        }
      }
    },
    "miscellaneous_options": {
      "title": "Miscellaneous Options",
      "type": "object",
      "fa_icon": "fas fa-file-import",
      "description": "Everything else.",
      "help_text": "These options are common to all nf-core pipelines and allow you to customise some of the core preferences for how the pipeline runs.\n\nTypically these options would be set in a Nextflow config file loaded for all pipeline runs, such as `~/.nextflow/config`.",
      "properties": {
        "help": {
          "type": "boolean",
          "title": "Display help text",
          "fa_icon": "fas fa-question-circle",
          "hidden": true
        },
        "version": {
          "type": "boolean",
          "title": "Display version",
          "description": "Display version and exit.",
          "fa_icon": "fas fa-question-circle",
          "hidden": true
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/input_options"
    },
    {
      "$ref": "#/definitions/advanced_options"
    },
    {
      "$ref": "#/definitions/miscellaneous_options"
    }
  ],
  "properties": {
    "aws_image_prefix": {
      "type": "string",
      "title": "AWS image prefix",
      "hidden": true
    },
    "aws_queue": {
      "type": "string",
      "title": "AWS queue",
      "hidden": true
    },
    "monochrome_logs": {
      "type": "boolean"
    },
    "validate_params": {
      "type": "boolean",
      "default": true
    },
    "show_hidden_params": {
      "type": "boolean"
    }
  },
  "docs": {
    "intro": "\n## Introduction\n\n",
    "links": "## Useful links\n\n* [nextflow](https://www.nextflow.io/)\n* [docker](https://www.docker.com/products/docker-desktop)"
  }
}